ОТЧЁТ ПО ЛАБОРАТОРНОЙ РАБОТЕ №2.

1. Описание предметной области.

В качестве предметной области была выбрана международная спортивная организация, проводящая бои по смешанным единоборствам - UFC (Ultimate Fighting Championship). Бои проходят в рамках определённых событий, разделённых по типам: нумерованные ивенты (UFC 300), регулярные события (UFC FIGHT NIGHT), телевизионные турниры (UFC on ESPN), платные трансляции (PPV). Расклада турниров выглядит следующим образом: Main Card  (главные бои по 5 раундов), Preliminary Card (предварительные бои по 3 раунда), Early Prelims (ранние предварительные бои). Бойцы разделены по полу и весовым категориям (8 и 4 категории для мужчин и женщин соответственно). 

1.1. Ключевые сущности и атрибуты БД.

Ключевые сущности в предметной области:  бой, бойцы, события, результат.

Ключевые атрибуты: id боя, дата проведения, суммарная продолжительность боя в формате MM:SS, тип события, место проведения боя, боец 1 и боец 2 (имена), победитель (результат боя), весовая категория, кард. 

2. Основной функционал и архитектура.

База данных была реализована на языке программирования python.

Архитектура БД:
- Основной файл: бинарный, фиксированная длина записи (189 байт)
- Индексный файл: pickle-сериализованная хэш-таблица
- GUI: Tkinter с разделением интерфейса по ролям"

Реализованы основные операции с базой данных: создание, удаление, очистка, обновление, работа с backup файлом, добавление записи, редактирование записи, поиск записи по ключевому значению (id) и другим выбранным атрибутам, импорт данных из формата json и экспорт в эксель.

Все операции с базой данных происходят напрямую, а не через копию за счёт использования бинарного файла фиксированного формата (189 байт) и файла индексов.

3. Временная статистика и анализ сложности-эффективности алгоритмов.

В реализованной файловой базе данных применены различные алгоритмы работы с данными. Ниже приведён теоретический и практический анализ временной сложности основных операций.



| Операция                        | Теоретическая сложность | Замер времени  | 
|---------------------------------|--------------------------|-------------------------------------------------------------|
| Добавление одной записи     | O(1)               | 0.18 – 0.35 мс |                                       
| Поиск по ID (ключу)        | O(1)               | 0.04 – 0.09 мс |                                        
| Поиск по произвольному полю | O(K)                | 3.8 – 5.2 мс |                                           
| Редактирование записи       | O(1) + O(K)             | 4.1 – 6.3 мс  |                                          
| Удаление по ID              | O(1) + O(K) редко   | 0.1 мс (обычно), до 8 мс при перенумерации |        
| Удаление по полю (не ID)    | O(K)                | 4.5 – 6.8 мс |                                           
| Импорт записей из JSON  | O(K)            | 42 – 68 мс (0.42 – 0.68 с) |                             
| Экспорт 100 записей в Excel | O(K)                    | 38 – 55 мс |                                            
                                            

Ключевые оптимизации:

1. Внешний индекс по первичному ключу (id) 
   Хэш-таблица `id → смещение в файле` хранится в оперативной памяти и на диске (pickle).  
   → Операции чтения, редактирования и удаления по ID выполняются за константное время O(1).

2. Фиксированный размер записи (189 байт)
  
   Позволяет вычислять точное смещение без чтения заголовков → прямой доступ.

3. Логическое удаление (флаг active)  
   Исключает физическое перемещение данных при удалении → сохраняет O(1) для удаления по ключу.

4. Запись новых записей в конец файла  
   Добавление не требует сдвига существующих данных → O(1) амортизировано.

5. Защита от дубликатов и валидация
   Выполняются только при добавлении/редактировании, не влияют на скорость чтения.


4. Модель безопасности. 

В рамках лабораторной работы реализована дискреционная модель безопасности (DAC) на уровне приложения. 

Субъекты: пользователь, работающий с программой через GUI.
Объекты: файловая БД (бинарный файл) как главный объект и Backup/Json файлы как вспомогательные объекты.

Матрица прав доступа:
| Субъект \ Объект | Файл БД             | Backup      | JSON               | Операции GUI             |
| ---------------- | ------------------- | ----------- | ------------------ | ------------------------ |
| Пользователь     | нет прямого доступа | нет прямого | может выбрать файл | использовать функции     |
| Программа        | R, W, C, D, E, I    | R, W, C, L  | R                  | управление всем доступом |


